# Включаем движок перезаписи
RewriteEngine On

# РЕДИРЕКТЫ: ВСЕ варианты на https://murkolive.info (БЕЗ www)
# 1. HTTP без www -> HTTPS без www
RewriteCond %{HTTPS} off
RewriteCond %{HTTP_HOST} ^murkolive\.info$ [NC]
RewriteRule ^(.*)$ https://murkolive.info/$1 [L,R=301]

# 2. HTTP с www -> HTTPS без www  
RewriteCond %{HTTPS} off
RewriteCond %{HTTP_HOST} ^www\.murkolive\.info$ [NC]
RewriteRule ^(.*)$ https://murkolive.info/$1 [L,R=301]

# 3. HTTPS с www -> HTTPS без www
RewriteCond %{HTTPS} on
RewriteCond %{HTTP_HOST} ^www\.murkolive\.info$ [NC]
RewriteRule ^(.*)$ https://murkolive.info/$1 [L,R=301]

# Кэширование для улучшения скорости
<IfModule mod_expires.c>
  ExpiresActive On
  
  # Изображения
  ExpiresByType image/jpg "access plus 1 month"
  ExpiresByType image/jpeg "access plus 1 month"
  ExpiresByType image/gif "access plus 1 month"
  ExpiresByType image/png "access plus 1 month"
  ExpiresByType image/webp "access plus 1 month"
  ExpiresByType image/svg+xml "access plus 1 month"
  ExpiresByType image/x-icon "access plus 1 year"
  
  # Видео
  ExpiresByType video/mp4 "access plus 1 month"
  ExpiresByType video/webm "access plus 1 month"
  
  # CSS, JavaScript
  ExpiresByType text/css "access plus 1 month"
  ExpiresByType text/javascript "access plus 1 month"
  ExpiresByType application/javascript "access plus 1 month"
  
  # Шрифты
  ExpiresByType font/woff "access plus 1 month"
  ExpiresByType font/woff2 "access plus 1 month"
  
  # HTML
  ExpiresByType text/html "access plus 600 seconds"
  
  # Другие
  ExpiresByType application/pdf "access plus 1 month"
</IfModule>

# Gzip сжатие
<IfModule mod_deflate.c>
  AddOutputFilterByType DEFLATE text/plain
  AddOutputFilterByType DEFLATE text/html
  AddOutputFilterByType DEFLATE text/xml
  AddOutputFilterByType DEFLATE text/css
  AddOutputFilterByType DEFLATE application/xml
  AddOutputFilterByType DEFLATE application/xhtml+xml
  AddOutputFilterByType DEFLATE application/rss+xml
  AddOutputFilterByType DEFLATE application/javascript
  AddOutputFilterByType DEFLATE application/x-javascript
  AddOutputFilterByType DEFLATE application/json
  
  # Совместимость с браузерами
  BrowserMatch ^Mozilla/4 gzip-only-text/html
  BrowserMatch ^Mozilla/4\.0[678] no-gzip
  BrowserMatch \bMSIE !no-gzip !gzip-only-text/html
</IfModule>